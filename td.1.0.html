<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>version 1.0</title>
<style>
  body { display: flex; justify-content: center; align-items: center; height: 100vh; background: #222; color: #fff; font-family: sans-serif; }
  canvas { background: #333; border: 2px solid #555; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="600" height="400"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// Spielfeld
const path = [
  {x: 0, y: 180},
  {x: 600, y: 180}
];

let money = 100;
let lives = 10;

// Gegner
class Enemy {
  constructor() {
    this.x = path[0].x;
    this.y = path[0].y;
    this.hp = 100;
    this.speed = 1;
  }

  move() {
    if(this.x < path[1].x) this.x += this.speed;
  }

  draw() {
    ctx.fillStyle = "red";
    ctx.fillRect(this.x-10, this.y-10, 20, 20);
    // HP-Leiste
    ctx.fillStyle = "green";
    ctx.fillRect(this.x-10, this.y-15, 20*(this.hp/100), 3);
  }
}

// Turm
class Tower {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.range = 100;
    this.damage = 10;
    this.cooldown = 0;
  }

  shoot(enemies) {
    if(this.cooldown > 0) { this.cooldown--; return; }
    for(let enemy of enemies) {
      let dx = enemy.x - this.x;
      let dy = enemy.y - this.y;
      let distance = Math.sqrt(dx*dx + dy*dy);
      if(distance <= this.range) {
        enemy.hp -= this.damage;
        this.cooldown = 10; // Pause zwischen Schüssen
        break;
      }
    }
  }

  draw() {
    ctx.fillStyle = "blue";
    ctx.beginPath();
    ctx.arc(this.x, this.y, 15, 0, 2*Math.PI);
    ctx.fill();
    // Reichweite anzeigen
    ctx.strokeStyle = "rgba(0,0,255,0.3)";
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.range, 0, 2*Math.PI);
    ctx.stroke();
  }
}

let enemies = [];
let towers = [new Tower(300, 180)]; // Ein Turm in der Mitte

function gameLoop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Pfad zeichnen
  ctx.strokeStyle = "yellow";
  ctx.lineWidth = 20;
  ctx.beginPath();
  ctx.moveTo(path[0].x, path[0].y);
  ctx.lineTo(path[1].x, path[1].y);
  ctx.stroke();

  // Gegner spawnen
  if(Math.random() < 0.01) enemies.push(new Enemy());

  // Gegner bewegen und zeichnen
  for(let i = enemies.length-1; i >= 0; i--) {
    let enemy = enemies[i];
    enemy.move();
    enemy.draw();
    if(enemy.x >= path[1].x) {
      lives--;
      enemies.splice(i,1);
    }
    if(enemy.hp <= 0) enemies.splice(i,1);
  }

  // Türme schießen und zeichnen
  for(let tower of towers) {
    tower.shoot(enemies);
    tower.draw();
  }

  // HUD
  ctx.fillStyle = "white";
  ctx.fillText("Geld: "+money+"   Leben: "+lives, 10, 20);

  if(lives <= 0) {
    ctx.fillStyle = "red";
    ctx.font = "40px sans-serif";
    ctx.fillText("Game Over", 200, 200);
  } else {
    requestAnimationFrame(gameLoop);
  }
}

gameLoop();
</script>
</body>
</html>
